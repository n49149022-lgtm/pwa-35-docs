<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>35 генераторов документов | Россия</title>
    <link rel="stylesheet" href="/pwa-35-docs/css/style.css">
    <link rel="manifest" href="/pwa-35-docs/manifest.json">
    <meta name="description" content="Бесплатные генераторы документов для всех регионов России">
    <meta name="theme-color" content="#667eea">
</head>
<body>
    <header>
        <h1>📄 Генераторы документов</h1>
        <p>35 готовых шаблонов для всех регионов России</p>
        <div class="search-box">
            <input type="text" id="searchInput" placeholder="🔍 Поиск документов..." onkeyup="searchModules()">
        </div>
        <div class="modules-count" id="modulesCount">Загрузка...</div>
    </header>

    <main>
        <div class="modules-grid" id="modulesContainer">
            <!-- JavaScript загрузит модули сюда -->
        </div>
    </main>

    <script>
        // Данные всех модулей
        const modulesData = [
            { file: "shtraf.html", name: "Обжалование штрафа", category: "Штрафы", type: "shtraf" },
            { file: "shtraf-gibdd.html", name: "Обжалование штрафа ГИБДД", category: "Штрафы", type: "shtraf" },
            { file: "zhaloba-shtraf.html", name: "Жалоба на штраф", category: "Штрафы", type: "shtraf" },
            
            { file: "zhaloba-uk.html", name: "Жалоба в УК", category: "Жалобы и претензии", type: "zhaloba" },
            { file: "zhaloba-bank.html", name: "Жалоба на банк", category: "Жалобы и претензии", type: "zhaloba" },
            { file: "zhaloba-strahovaya.html", name: "Жалоба на страховую", category: "Жалобы и претензии", type: "zhaloba" },
            { file: "zhaloba-detsad.html", name: "Жалоба на детский сад", category: "Жалобы и претензии", type: "zhaloba" },
            { file: "zhaloba-taksi.html", name: "Жалоба на такси", category: "Жалобы и претензии", type: "zhaloba" },
            { file: "zhaloba-autoservice.html", name: "Жалоба на автосервис", category: "Жалобы и претензии", type: "zhaloba" },
            { file: "zhaloba-svyaz.html", name: "Жалоба на связь", category: "Жалобы и претензии", type: "zhaloba" },
            { file: "pretenziya-internet.html", name: "Претензия провайдеру", category: "Жалобы и претензии", type: "zhaloba" },
            { file: "pretenziya-tehnika.html", name: "Претензия на технику", category: "Жалобы и претензии", type: "zhaloba" },
            { file: "pretenziya-zhkh.html", name: "Претензия ЖКХ", category: "Жалобы и претензии", type: "zhaloba" },
            
            { file: "dogovor-kruzhok.html", name: "Договор с кружком", category: "Договоры", type: "dogovor" },
            { file: "dogovor-nyanya.html", name: "Договор с няней", category: "Договоры", type: "dogovor" },
            { file: "dogovor-repetitor.html", name: "Договор с репетитором", category: "Договоры", type: "dogovor" },
            { file: "dogovor-kupli-prodazhi.html", name: "Договор купли-продажи", category: "Договоры", type: "dogovor" },
            
            { file: "alimenty.html", name: "Алименты", category: "Семейное право", type: "default" },
            { file: "soglasie-rebenok.html", name: "Согласие на выезд ребенка", category: "Семейное право", type: "default" },
            
            { file: "doverennost-avto.html", name: "Доверенность на авто", category: "Автомобильные", type: "default" },
            { file: "putevoy-list.html", name: "Путевой лист", category: "Автомобильные", type: "default" },
            
            { file: "ip-usn6.html", name: "ИП на УСН 6%", category: "Бизнес", type: "default" },
            { file: "kudir.html", name: "КУДиР", category: "Бизнес", type: "default" },
            { file: "shtatnoe-raspisanie.html", name: "Штатное расписание", category: "Бизнес", type: "default" },
            
            { file: "pereraschet-zhkh.html", name: "Перерасчет ЖКХ", category: "ЖКХ", type: "default" },
            { file: "subsidiya-zhkh.html", name: "Субсидия ЖКХ", category: "ЖКХ", type: "default" },
            { file: "nizhe-tarifa.html", name: "Перерасчет (ниже тарифа)", category: "ЖКХ", type: "default" },
            { file: "protokol-tszh.html", name: "Протокол ТСЖ", category: "ЖКХ", type: "default" },
            
            { file: "aviakompensaciya.html", name: "Авиакомпенсация", category: "Транспорт", type: "default" },
            { file: "zaderzhka-reysa.html", name: "Задержка рейса", category: "Транспорт", type: "default" },
            
            { file: "vozvrat-tura.html", name: "Возврат тура", category: "Туризм", type: "default" },
            
            { file: "isk-zayavlenie.html", name: "Исковое заявление", category: "Судебные", type: "default" },
            
            { file: "raspiska-telefon.html", name: "Расписка за телефон", category: "Бытовые", type: "default" },
            { file: "spravka-sadik.html", name: "Справка в детский сад", category: "Бытовые", type: "default" },
            { file: "template.html", name: "Шаблон документа", category: "Прочее", type: "default" }
        ];

        // Функция получения бейджа по типу
        function getBadgeClass(type) {
            switch(type) {
                case 'shtraf': return 'badge-shtraf';
                case 'zhaloba': return 'badge-zhaloba';
                case 'dogovor': return 'badge-dogovor';
                default: return 'badge-default';
            }
        }

        function getBadgeText(type) {
            switch(type) {
                case 'shtraf': return 'Штраф';
                case 'zhaloba': return 'Жалоба';
                case 'dogovor': return 'Договор';
                default: return 'Документ';
            }
        }

        // Функция отображения модулей
        function displayModules(modulesToShow) {
            const container = document.getElementById('modulesContainer');
            container.innerHTML = '';
            
            // Группируем по категориям
            const grouped = {};
            modulesToShow.forEach(module => {
                if (!grouped[module.category]) {
                    grouped[module.category] = [];
                }
                grouped[module.category].push(module);
            });
            
            // Сортируем категории
            const sortedCategories = Object.keys(grouped).sort();
            
            // Отображаем
            sortedCategories.forEach(category => {
                // Заголовок категории
                const categoryTitle = document.createElement('h2');
                categoryTitle.className = 'category-title';
                categoryTitle.textContent = category;
                container.appendChild(categoryTitle);
                
                // Модули категории
                grouped[category].forEach(module => {
                    const card = document.createElement('div');
                    card.className = 'module-card';
                    card.innerHTML = 
                        <a href="/pwa-35-docs/modules/"></a>
                        <span class="module-badge "></span>
                    ;
                    container.appendChild(card);
                });
            });
            
            // Обновляем счетчик
            document.getElementById('modulesCount').textContent = 
                Всего документов:  из 35;
        }

        // Функция поиска
        function searchModules() {
            const searchText = document.getElementById('searchInput').value.toLowerCase();
            
            if (searchText.trim() === '') {
                displayModules(modulesData);
                return;
            }
            
            const filtered = modulesData.filter(module => 
                module.name.toLowerCase().includes(searchText) ||
                module.category.toLowerCase().includes(searchText)
            );
            
            displayModules(filtered);
        }

        // Инициализация
        document.addEventListener('DOMContentLoaded', () => {
            displayModules(modulesData);
        });

        // Регистрация Service Worker для PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/pwa-35-docs/sw.js')
                    .then(reg => console.log('✅ SW зарегистрирован'))
                    .catch(err => console.log('❌ SW ошибка:', err));
            });
        }
    </script>
</body>
</html>
